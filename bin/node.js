// Generated by CoffeeScript 1.9.1
(function() {
  var app, express, http, io, jade, socket, views;

  express = require('express');

  socket = require('socket.io');

  jade = require('jade');

  app = express();

  http = require('http').Server(app);

  io = socket(http);

  views = [];

  views['index'] = jade.compileFile(__dirname + "/view/index.jade");

  app.get('/', function(req, res) {
    var data;
    data = {
      hello: 'hello2'
    };
    return res.send(views['index'](data));
  });

  io.emit('send:msg', {
    "for": 'everyone'
  });

  io.on('connection', function(thread) {
    console.log('a user connected');
    return thread.on('send:msg', function(msg) {
      thread.broadcast.emit('send:msg', msg);
      return console.log("received " + msg);
    });
  });

  app.use('/static', express["static"](__dirname + "/public"));

  http.listen(1337, function() {
    return console.log('Server running at http://127.0.0.1:1337/');
  });

}).call(this);
